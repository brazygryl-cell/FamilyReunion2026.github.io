<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Photo Gallery ‚Äî Williams Family Reunion</title>

<link rel="stylesheet" href="style.css" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<script type="module" src="nav.js"></script>

<style>
.gallery-title {
  text-align: center;
  margin: 2rem 0 1rem;
  font-family: "Playfair Display", serif;
  font-size: 2.4rem;
}

.gallery-grid {
  display: grid;
  gap: 14px;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  padding: 0 1.5rem 2.5rem;
}

.gallery-grid img {
  width: 100%;
  border-radius: 14px;
  object-fit: cover;
  height: 200px;
  cursor: pointer;
  box-shadow: var(--shadow);
  transition: transform .3s ease;
}

.gallery-grid img:hover {
  transform: scale(1.04);
}

/* Lightbox */
#lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: none;
  place-items: center;
  z-index: 999;
}

#lightbox img {
  max-width: 90%;
  max-height: 90vh;
  border-radius: 14px;
  box-shadow: 0 0 20px rgba(255,255,255,0.3);
}
</style>
</head>

<body>
<script>
  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", user => {
      if (!user && !window.location.pathname.includes("login.html")) {
        window.location.href = "login.html";
      }
    });
  }
</script>
  
<header></header>

<h2 class="gallery-title">Family Photo Gallery</h2>

<section class="gallery-grid">
  <!-- ‚úÖ Replace filenames with your actual images -->
  <img src="images/img1.jpg" alt="">
  <img src="images/img2.jpg" alt="">
  <img src="images/img3.jpg" alt="">
  <img src="images/img4.jpg" alt="">
  <img src="images/img5.jpg" alt="">
  <img src="images/img6.jpg" alt="">
  <img src="images/img7.jpg" alt="">
  <img src="images/img8.jpg" alt="">
  <img src="images/img9.jpg" alt="">
  <img src="images/img10.jpg" alt="">
  <img src="images/img11.jpg" alt="">
  <img src="images/img12.jpg" alt="">
  <img src="images/img13.jpg" alt="">
  <img src="images/img14.jpg" alt="">
  <img src="images/img15.jpg" alt="">
  <img src="images/img16.jpg" alt="">
  <img src="images/img17.jpg" alt="">
  <img src="images/img18.jpg" alt="">
  <img src="images/img19.jpg" alt="">
  <img src="images/img20.jpg" alt="">
  <img src="images/img21.jpg" alt="">
  <img src="images/img22.jpg" alt="">
  <img src="images/img23.jpg" alt="">
  <img src="images/img24.jpg" alt="">
  <img src="images/img25.jpg" alt="">
  <img src="images/img26.jpg" alt="">
  <img src="images/img27.jpg" alt="">
  <img src="images/img28.jpg" alt="">
  <img src="images/img29.jpg" alt="">
  <img src="images/img30.jpg" alt="">
  <img src="images/img31.jpg" alt="">
  <img src="images/img32.jpg" alt="">
  <img src="images/img33.jpg" alt="">
  <img src="images/img34.jpg" alt="">
  <img src="images/img35.jpg" alt="">
  <img src="images/img36.jpg" alt="">
  <img src="images/img37.jpg" alt="">
  <img src="images/img38.jpg" alt="">
  <img src="images/img39.jpg" alt="">
  <img src="images/img40.jpg" alt="">
  <img src="images/img41.jpg" alt="">
  <img src="images/img42.jpg" alt="">
  <img src="images/img43.jpg" alt="">
  <img src="images/img44.jpg" alt="">
  <img src="images/img45.jpg" alt="">
  <img src="images/img46.jpg" alt="">
  <img src="images/img47.jpg" alt="">
  <img src="images/img48.jpg" alt="">
  <img src="images/img49.jpg" alt="">
  <img src="images/img50.jpg" alt="">
  <img src="images/img51.jpg" alt="">
  <img src="images/img52.jpg" alt="">
  <img src="images/img53.jpg" alt="">
  <img src="images/img54.jpg" alt="">
  <img src="images/img55.jpg" alt="">
  <img src="images/img56.jpg" alt="">
  <img src="images/img57.jpg" alt="">
  <img src="images/img58.jpg" alt="">
</section>

<!-- Lightbox -->
<div id="lightbox">
  <button class="nav-btn prev" aria-label="Previous image">‚ùÆ</button>
  <img src="">
  <button class="nav-btn next" aria-label="Next image">‚ùØ</button>
</div>

<style>
  #lightbox {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.88);
    display: none;
    place-items: center;
    z-index: 999;
  }
  #lightbox img {
    max-width: 90%;
    max-height: 90vh;
    border-radius: 14px;
    box-shadow: 0 0 20px rgba(255,255,255,0.3);
    transition: transform 0.2s ease;
  }
  .nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.15);
    color: #fff;
    border: none;
    font-size: 2rem;
    padding: 0.4em 0.6em;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.2s ease;
  }
  .nav-btn:hover { background: rgba(255,255,255,0.3); }
  .nav-btn.prev { left: 4%; }
  .nav-btn.next { right: 4%; }

  @media (max-width: 600px) {
    .nav-btn { font-size: 1.6rem; padding: 0.3em 0.5em; }
  }
</style>

<!-- Lightbox JS -->
<script>
const imgs = Array.from(document.querySelectorAll(".gallery-grid img"));
const lightbox = document.getElementById("lightbox");
const lightboxImg = lightbox.querySelector("img");
const prevBtn = lightbox.querySelector(".prev");
const nextBtn = lightbox.querySelector(".next");
let currentIndex = 0;

function showImage(index) {
  currentIndex = (index + imgs.length) % imgs.length;
  lightboxImg.src = imgs[currentIndex].src;
  lightbox.style.display = "grid";
}

imgs.forEach((img, i) => {
  img.addEventListener("click", () => showImage(i));
});

function closeLightbox() {
  lightbox.style.display = "none";
}

lightbox.addEventListener("click", (e) => {
  if (e.target === lightbox) closeLightbox();
});
prevBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  showImage(currentIndex - 1);
});
nextBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  showImage(currentIndex + 1);
});

// Keyboard navigation
document.addEventListener("keydown", (e) => {
  if (lightbox.style.display !== "grid") return;
  if (e.key === "ArrowLeft") showImage(currentIndex - 1);
  if (e.key === "ArrowRight") showImage(currentIndex + 1);
  if (e.key === "Escape") closeLightbox();
});
</script>

<!-- üîê Netlify Identity -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<script type="module">
  import { loadNavbar, enableLogout, requireAuth } from "./nav.js";

  document.addEventListener("DOMContentLoaded", () => {
    // ‚úÖ Require Auth FIRST. Don‚Äôt wait for nav to render.
    if (!window.location.pathname.includes("login.html")) {
      requireAuth();
    }

    // Then load UI stuff
    loadNavbar();
    enableLogout();
  });
</script>

</body>
</html>
